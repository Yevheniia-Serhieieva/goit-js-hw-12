{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import Axios from \"axios\";\n\nconst axios = Axios.create({\n    baseURL: 'https://pixabay.com/api/',\n    params: {\n        key: '51736098-e561806c369733f177830f298',\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    },\n});\n\nexport async function getImagesByQuery(query, page, per_page = 15) {\n    const response = await axios.get('', {\n        params: {\n            q: query,\n            page: page,\n            per_page: per_page,\n        }\n    });\n    return response.data;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nconst galleryElem = document.querySelector('.gallery');\nlet lightbox = new SimpleLightbox(\".gallery a\");\n\n\nexport function createGallery(images) {\n    const markup = images\n        .map((image) => \n            `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n            class=\"gallery-image\"\n            src=\"${image.webformatURL}\"\n            data-source=\"${image.largeImageURL}\"\n            alt=\"${image.tags}\"\n            />\n            <div class = \"gallery-box\">\n            <p class=\"gallery-box-text\">Likes <span class=\"gallery-box-span\">${image.likes}</span></p>\n            <p class=\"gallery-box-text\">Views <span class=\"gallery-box-span\">${image.views}</span></p>\n            <p class=\"gallery-box-text\">Comments <span class=\"gallery-box-span\">${image.comments}</span></p>\n            <p class=\"gallery-box-text\">Downloads <span class=\"gallery-box-span\">${image.downloads}</span></p>\n            </div>\n            </a>\n            </li>`\n        )\n        .join('');\n\n    galleryElem.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryElem.innerHTML = '';\n}\n\nexport function showLoader() {\n    document.querySelector('.loader').classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n    document.querySelector('.loader').classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton() {\n    document.querySelector('.btn-load').classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n    document.querySelector('.btn-load').classList.add('is-hidden');\n}\n\nexport function loadMoreBtnVisibleStatus(totalHits, page, per_page = 15) {\n    const maxPage = Math.ceil(totalHits / per_page);\n    if(page < maxPage) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        };\n}\n\nexport function scrollNewContent() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}","import { getImagesByQuery } from \"./js/pixabay-api\";\nimport { clearGallery, createGallery, hideLoader, hideLoadMoreButton, loadMoreBtnVisibleStatus, scrollNewContent, showLoader } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst formElem = document.querySelector('.form');\nconst loadMoreBtnElem = document.querySelector('.btn-load');\n\nlet query = '';\nlet page = 1;\nconst per_page = 15;\nlet totalHits = 0;\n\n\n\nformElem.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    query = e.target.elements.searchText.value.trim();\n\n    if(query === '') {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Empty input field',\n        });\n        return;\n    };\n    page = 1;\n    clearGallery();\n    showLoader();\n    hideLoadMoreButton();\n\n    try {\n        const data = await getImagesByQuery(query, page, per_page);\n        totalHits = data.totalHits;\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message:\n                \"Sorry, there are no images matching your search query. Please try again!\",\n            });\n            return;\n        } else {\n            createGallery(data.hits);\n            loadMoreBtnVisibleStatus(totalHits, page);\n        }\n    } catch (error) {\n        iziToast.error({\n            message: \"An error occurred while fetching images. Please try again.\",\n        });\n    } finally {\n        hideLoader();\n    }\n\n\n    e.target.reset();\n});\n\n\n\nloadMoreBtnElem.addEventListener('click', async () => {\n    page += 1;\n    showLoader();\n\n    \n    try {\n        const data = await getImagesByQuery(query, page, per_page);\n        createGallery(data.hits);     \n        loadMoreBtnVisibleStatus(totalHits, page);\n        scrollNewContent();\n    } catch (error) {\n        iziToast.error({\n            message: \"An error occurred while fetching images. Please try again.\",\n        });\n    } finally {\n        hideLoader();\n    }\n})\n\n"],"names":["axios","Axios","getImagesByQuery","query","page","per_page","galleryElem","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","loadMoreBtnVisibleStatus","totalHits","maxPage","scrollNewContent","cardHeight","formElem","loadMoreBtnElem","iziToast","data"],"mappings":"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"}